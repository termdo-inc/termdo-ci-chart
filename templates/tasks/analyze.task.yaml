apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: analyze-task
spec:
  workspaces:
    - name: source
      description: Workspace containing the repository
      readOnly: true
  steps:
    - name: analyze
      image: alpine
      workingDir: $(workspaces.source.path)
      script: |
        #!/bin/sh
        set -e

        echo -e "[‚è≥]: Analyzing..."
        if [ ! -f "{{ .Values.project.dockerfile.path }}/{{ .Values.project.dockerfile.name }}" ]; then
          echo -e "[üî¥]: Dockerfile not found!\n"
          exit 1
        fi
        echo -e "[üü¢]: Analysis complete.\n"
